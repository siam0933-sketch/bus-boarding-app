# Google Sheets 연동 설정 가이드

## 1. Google Sheets 공개 설정

앱이 Google Sheets에서 데이터를 읽을 수 있도록 시트를 공개해야 합니다.

### 단계:

1. Google Sheets 문서 열기: https://docs.google.com/spreadsheets/d/1LRiMX6-q3E5Zyy12nZtkBW1ccG6HjpJLBieT-S55Jb4/edit

2. 우측 상단의 **"공유"** 버튼 클릭

3. "일반 액세스" 섹션에서:
   - **"제한됨"**을 **"링크가 있는 모든 사용자"**로 변경
   - 권한을 **"뷰어"**로 설정

4. **"완료"** 클릭

## 2. Google Sheets 구조

앱은 다음과 같은 시트 구조를 기대합니다:

### 시트 레이아웃:

```
     A열    B열      C열    |   D열    E열      F열    |  ...
1  [월요일]                 | [화요일]                 |  ...
2   3시부                   |  3시부                   |  ...
3   시간  정류장   이름     |  시간  정류장   이름     |  ...
4  15:00  학교앞  김철수    | 15:00  도서관  이영희    |  ...
5  15:05  공원    박민수    | 15:05  마트    최지민    |  ...
...
10  5시부                   |  5시부                   |  ...
11  시간  정류장   이름     |  시간  정류장   이름     |  ...
12 17:00  학교앞  정수진    | 17:00  도서관  강민호    |  ...
```

**구조 설명:**
- **1행**: 요일 (월요일, 화요일, 수요일, 목요일, 금요일)
- **2행**: 시간대 (3시부, 5시부)
- **3행**: 컬럼 헤더 (시간 | 정류장 | 이름)
- **4행부터**: 실제 학생 데이터

**컬럼 배치:**
- 월요일: A열~C열 (A: 시간, B: 정류장, C: 이름)
- 화요일: D열~F열 (D: 시간, E: 정류장, F: 이름)
- 수요일: G열~I열 (G: 시간, H: 정류장, I: 이름)
- 목요일: J열~L열 (J: 시간, K: 정류장, L: 이름)
- 금요일: M열~O열 (M: 시간, N: 정류장, O: 이름)

**중요 사항:**
- 각 요일마다 3시부와 5시부 섹션이 별도로 있습니다
- 3시부와 5시부 사이에는 빈 행이 있어야 합니다
- 시간, 정류장, 이름 순서로 데이터를 입력하세요
- 빈 행이나 시간 셀이 비어있으면 해당 섹션이 종료됩니다

## 3. 데이터 추가/수정

### Google Sheets에서 직접 편집:

1. 브라우저에서 Google Sheets 열기
2. 해당 요일의 컬럼으로 이동 (월요일=A~C열, 화요일=D~F열 등)
3. 3시부 또는 5시부 섹션에서 데이터 추가 또는 수정
4. 변경사항은 자동 저장됨

### 앱에서 새로고침:

앱을 다시 시작하면 최신 데이터가 자동으로 로드됩니다.

## 4. 문제 해결

### 데이터가 로드되지 않는 경우:

1. **Google Sheets가 공개로 설정되어 있는지 확인**
   - "링크가 있는 모든 사용자" 권한으로 설정되어 있어야 합니다

2. **시트 구조 확인**
   - 1행에 요일, 2행에 시간대(3시부/5시부), 3행에 헤더가 있는지 확인
   - 각 요일이 3개 컬럼씩 차지하는지 확인

3. **인터넷 연결 확인**
   - 앱이 인터넷에 연결되어 있어야 Google Sheets에서 데이터를 가져올 수 있습니다

4. **컬럼 매핑 확인**
   - 월요일: A~C열, 화요일: D~F열, 수요일: G~I열, 목요일: J~L열, 금요일: M~O열
   - 각 요일의 첫 번째 컬럼부터 시간, 정류장, 이름 순서

5. **콘솔 로그 확인**
   - 앱 실행 시 터미널에서 에러 메시지 확인
   - `Fetching data from Google Sheets...` 같은 로그가 나타나야 합니다
   - `총 X명의 학생 데이터를 불러왔습니다.` 메시지 확인

### 특정 학생이 표시되지 않는 경우:

- 해당 학생의 행에 빈 셀이 없는지 확인
- 특히 "이름" 컬럼이 비어있으면 해당 행은 무시됩니다

## 5. 앱 실행

```bash
cd bus-boarding-app
npm start
```

그러면 QR 코드가 표시되고, Expo Go 앱으로 스캔하여 테스트할 수 있습니다.

## 6. 향후 개선 사항

현재는 앱 시작 시에만 데이터를 로드합니다.
향후 추가할 수 있는 기능:
- 새로고침 버튼 추가
- 주기적 자동 새로고침
- Google Sheets에 탑승 기록 저장
