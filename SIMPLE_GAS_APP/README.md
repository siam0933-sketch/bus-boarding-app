# 🚌 버스 탑승 관리 - Google Apps Script 단독 버전

Google Apps Script만으로 완전히 작동하는 버스 탑승 관리 앱입니다.
GitHub Pages 없이 Google에서 직접 호스팅됩니다.

## ✨ 특징

- ✅ **초간단 설정**: 시트 ID만 넣으면 끝
- ✅ **별도 호스팅 불필요**: Google에서 직접 서빙
- ✅ **CORS 걱정 없음**: 같은 도메인에서 작동
- ✅ **무료**: Google Apps Script 무료 사용

## 📋 설치 방법

### 1. Google Sheets 준비

시트 구조:
```
1행: 메모 (A1=월요일 메모, E1=화요일 메모, ...)
2행: 요일 헤더 (월요일, 화요일, ...)
3행: 컬럼 헤더 (노선, 시간, 정류장, 이름)
4행~: 데이터
```

각 요일은 4칸씩:
- 월요일: A~D열
- 화요일: E~H열
- 수요일: I~L열
- 목요일: M~P열
- 금요일: Q~T열

### 2. Apps Script 설정

1. **Google Sheets 열기**
2. **확장 프로그램 > Apps Script** 클릭
3. 기존 코드 삭제
4. **Code.gs 파일 내용 복사 & 붙여넣기**
5. **파일 > 새로 만들기 > HTML 파일** 클릭
6. 파일 이름: `index` 입력
7. **index.html 파일 내용 복사 & 붙여넣기**
8. **Code.gs 파일**에서 `SPREADSHEET_ID` 수정:
   ```javascript
   const SPREADSHEET_ID = '본인의_시트_ID';
   ```
9. **저장** (Ctrl+S)

### 3. 배포

1. 상단 **배포 > 새 배포** 클릭
2. **유형 선택** (⚙️ 아이콘) > **웹 앱** 선택
3. 설정:
   - **설명**: "버스 탑승 관리 앱"
   - **다음 계정으로 실행**: **나**
   - **액세스 권한**: **모든 사용자** (중요!)
4. **배포** 클릭
5. **액세스 승인** > Google 계정 선택 > 권한 부여
6. **웹 앱 URL** 복사

### 4. 사용

복사한 URL을 브라우저에서 열면 앱이 실행됩니다!
```
https://script.google.com/macros/s/AKfy.../exec
```

## 🎯 기능

### 요일별 관리
- 월~금 탭으로 요일 전환
- 각 요일별 독립적인 데이터

### 학생 관리
- **상태 변경**: 결석 / 시간변경 / 직접등원
- **추가/삭제**: 편집 모드에서 관리
- **노선 필터**: 특정 노선만 보기

### 메모
- 요일별 메모 입력
- 자동 저장 (1초 후)

## 📝 시트 ID 찾는 방법

Google Sheets URL에서:
```
https://docs.google.com/spreadsheets/d/[이_부분이_시트_ID]/edit
```

예시:
```
https://docs.google.com/spreadsheets/d/1LRiMX6-q3E5Zyy12nZtkBW1ccG6HjpJLBieT-S55Jb4/edit
```
→ 시트 ID: `1LRiMX6-q3E5Zyy12nZtkBW1ccG6HjpJLBieT-S55Jb4`

## 🔧 문제 해결

### "승인되지 않음" 오류
- **배포** > **배포 관리**에서 "액세스 권한"이 **모든 사용자**인지 확인

### 데이터가 안 보임
- **Code.gs**에서 `SPREADSHEET_ID`가 올바른지 확인
- 시트 구조가 맞는지 확인 (1행=메모, 2행=요일, 3행=헤더, 4행~=데이터)

### "권한 없음" 오류
- Apps Script 편집기에서 권한 승인 필요
- 상단 ▶ 실행 버튼 클릭 > 권한 부여

## 🚀 업데이트 방법

코드를 수정한 후:
1. **저장** (Ctrl+S)
2. **배포 > 배포 관리**
3. 기존 배포 옆 ⚙️ 아이콘 클릭
4. **새 버전으로 배포**
5. **배포** 클릭

URL은 변경되지 않습니다!

## 💡 장점

vs GitHub Pages 버전:
- ✅ 설정 훨씬 간단
- ✅ 배포 한 곳에서만
- ✅ CORS 문제 없음
- ✅ 시트 ID만 있으면 됨
- ✅ Google 계정으로 접근 제어 가능

## 📱 모바일 지원

모바일 브라우저에서도 정상 작동합니다!
URL을 북마크하여 사용하세요.

## 🔐 보안

- Apps Script는 Google 계정으로 실행됩니다
- "모든 사용자" 권한: URL을 아는 사람만 접근 가능
- 시트 자체 권한은 별도로 관리됩니다

## 📞 지원

문제가 있으면:
1. Code.gs의 `SPREADSHEET_ID` 확인
2. 시트 구조 확인
3. 배포 권한 확인 ("모든 사용자")
